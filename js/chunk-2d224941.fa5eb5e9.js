(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d224941"],{e176:function(t,e,o){"use strict";o.r(e);var a=o("7a23"),i=o("42f0"),c=o.n(i),n={class:"h-100 d-flex flex-column"},r=Object(a["i"])('<div class="bread-bar"><ol class="breadcrumb m-0 d-md-flex d-none"><li class="breadcrumb-item"><a href="#">首頁</a></li><li class="breadcrumb-item active" aria-current="page">附近站牌</li></ol></div>',1),s={class:"map-wrap"},l={class:"route-search-area active"},d={class:"route-search-header"},u=["value"],p=Object(a["h"])("input",{list:"datalistOptions",class:"form-control",id:"stationName",placeholder:"想去哪裡?"},null,-1),b={id:"datalistOptions"},h=["value"],m=Object(a["h"])("div",{class:"route-search-body"},[Object(a["h"])("ul",{class:"route-list"})],-1),g=Object(a["h"])("img",{src:c.a,class:"icon-filter",alt:"gps-icon"},null,-1),O=[g],v=Object(a["h"])("div",{class:"map",id:"map"},null,-1);function f(t,e,o,i,c,g){var f=Object(a["D"])("Loading");return Object(a["w"])(),Object(a["g"])(a["a"],null,[Object(a["k"])(f,{active:c.isLoading,"z-index":2e3},null,8,["active"]),Object(a["h"])("div",n,[r,Object(a["h"])("div",s,[Object(a["h"])("div",l,[Object(a["h"])("div",d,[Object(a["N"])(Object(a["h"])("select",{class:"form-select mb-2","onUpdate:modelValue":e[0]||(e[0]=function(t){return c.city=t}),onChange:e[1]||(e[1]=function(t){return g.getAllStationFromCity()})},[(Object(a["w"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(c.cityList,(function(t){return Object(a["w"])(),Object(a["g"])("option",{value:t.City,key:t.City},Object(a["G"])(t.CityName),9,u)})),128))],544),[[a["I"],c.city]]),p,Object(a["h"])("datalist",b,[(Object(a["w"])(!0),Object(a["g"])(a["a"],null,Object(a["B"])(c.optiondata,(function(t){return Object(a["w"])(),Object(a["g"])("option",{value:t.StationName.Zh_tw,key:t.StationUID},null,8,h)})),128))])]),m]),Object(a["h"])("div",{class:"gps-icon",onClick:e[2]||(e[2]=function(t){return g.locateGPS()})},O),v])])],64)}o("d81d");var j=o("e11e"),y=o.n(j),w=o("cc8c"),S={},C=new y.a.Icon({iconUrl:o("e275"),iconSize:[49,49],iconAnchor:[24,24],popupAnchor:[0,-24]}),L={data:function(){return{isLoading:!1,locationMarkerID:"",optiondata:[],city:"Taipei",cityList:w}},methods:{locateGPS:function(){var t=this;navigator.geolocation.getCurrentPosition((function(e){S.eachLayer((function(e){e._leaflet_id===t.locationMarkerID&&S.removeLayer(e)}));var o=[e.coords.latitude,e.coords.longitude];console.log(o),S.setView(o,15),document.querySelector(".gps-icon").classList.add("active");var a=y.a.marker([e.coords.latitude,e.coords.longitude],{icon:C});a.addTo(S),t.locationMarkerID=a._leaflet_id}))},getAllStationFromCity:function(){var t=this;this.isLoading=!0;var e="https://ptx.transportdata.tw/MOTC/v2/Bus/Station/City/".concat(this.city,"?$select=StationUID%2CStationID%2CStationName%2CStationPosition%2CStationAddress&$format=JSON");this.axios.get(e,{headers:this.$getAuthorizationHeader()}).then((function(e){console.log(e.data),t.optiondata=e.data,t.isLoading=!1})).catch((function(t){console.log(t)}))}},mounted:function(){S=y.a.map("map",{zoomControl:!1,center:[25.0834397,121.4570441],zoom:13,tap:!1}),y.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(S),y.a.control.zoom({position:"bottomright"}).addTo(S),S.on("moveend",(function(){document.querySelector(".gps-icon").classList.remove("active")})),this.locateGPS(),this.getAllStationFromCity()}},k=o("6b0d"),I=o.n(k);const x=I()(L,[["render",f]]);e["default"]=x}}]);
//# sourceMappingURL=chunk-2d224941.fa5eb5e9.js.map