{"version":3,"sources":["webpack:///./node_modules/core-js/internals/engine-ff-version.js","webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./src/views/NearbyStation.vue","webpack:///./src/views/NearbyStation.vue?5599","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./node_modules/core-js/internals/engine-webkit-version.js","webpack:///./src/assets/images/bus_stop_select.svg","webpack:///./node_modules/core-js/internals/create-property.js","webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/internals/array-sort.js","webpack:///./node_modules/core-js/internals/engine-is-ie-or-edge.js","webpack:///./node_modules/core-js/modules/es.json.stringify.js","webpack:///./src/assets/images/busStop.svg"],"names":["userAgent","firefox","match","module","exports","global","DOMIterables","DOMTokenListPrototype","forEach","createNonEnumerableProperty","handlePrototype","CollectionPrototype","error","COLLECTION_NAME","prototype","$forEach","arrayMethodIsStrict","STRICT_METHOD","callbackfn","this","arguments","length","undefined","class","href","aria-current","src","alt","id","mobileTool","showArea","EstimateNearList","nearStationList","item","StationUID","selectStationUID","key","StationID","getNearStaionDetail","StationName","Zh_tw","Stops","distanceFromLocation","backToNearStationList","selectStationName","StopUID","toRouteDetail","EstimateTime","StopStatus","PlateNumb","$filters","toMinute","RouteName","Direction","DestinationStopNameZh","DepartureStopNameZh","City","locateGPS","openStreetMap","stationIcon","Icon","iconUrl","iconSize","iconAnchor","popupAnchor","stationSelectIcon","positionIcon","data","locationMarkerID","stationMarkers","lastSelectLatLon","selectStationLatLon","methods","navigator","geolocation","getCurrentPosition","position","eachLayer","layer","_leaflet_id","removeLayer","locate","coords","latitude","longitude","setView","document","querySelector","classList","add","marker","icon","addTo","getNearbyStation","Lat","Lon","url","console","log","axios","get","headers","$getAuthorizationHeader","then","response","x","distance","StationPosition","PositionLat","PositionLon","Math","floor","sort","a","b","addNearStationMarker","catch","err","Marker","Popup","index","popupContent","createPopupContent","popup","autoPan","className","status","offset","setLatLng","latLng","setContent","str","bindPopup","markerID","push","_latlng","lat","lng","setIcon","addLayer","getEstimatedTimeOfArrival","remove","zoomLevelAddMarker","zoomLevel","getZoom","statusCode","stop","getRouteInfo","RouteUID","area","param","city","route","routeUID","direction","LatLon","qStr","JSON","stringify","$router","mounted","map","zoomControl","center","zoom","tap","tileLayer","attribution","control","on","func","__exports__","render","$","uncurryThis","aCallable","toObject","lengthOfArrayLike","toString","fails","internalSort","FF","IE_OR_EDGE","V8","WEBKIT","test","un$Sort","FAILS_ON_UNDEFINED","FAILS_ON_NULL","STABLE_SORT","code","chr","value","result","String","fromCharCode","k","v","charAt","FORCED","getSortCompare","comparefn","y","target","proto","forced","array","itemsLength","items","arrayLength","webkit","toPropertyKey","definePropertyModule","createPropertyDescriptor","object","propertyKey","f","isArray","isObject","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","TypeError","IS_CONCAT_SPREADABLE_SUPPORT","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","arg","i","len","E","A","n","METHOD_NAME","argument","method","call","arraySlice","mergeSort","middle","insertionSort","merge","element","j","left","right","llength","rlength","lindex","rindex","UA","getBuiltIn","apply","Array","$stringify","exec","charCodeAt","replace","numberToString","tester","low","hi","fix","string","prev","next","stat","it","replacer","space","l","args"],"mappings":"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","file":"js/chunk-4a68619f.7271fbd8.js","sourcesContent":["var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar DOMTokenListPrototype = require('../internals/dom-token-list-prototype');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar handlePrototype = function (CollectionPrototype) {\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  if (DOMIterables[COLLECTION_NAME]) {\n    handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);\n  }\n}\n\nhandlePrototype(DOMTokenListPrototype);\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","<template>\r\n  <div class=\"h-100 d-flex flex-column\">\r\n    <div class=\"bread-bar d-flex justify-content-between\">\r\n      <ol class=\"breadcrumb m-0\">\r\n        <li class=\"breadcrumb-item\"><a href=\"#\">首頁</a></li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">附近站牌</li>\r\n      </ol>\r\n      <div class=\"mobile-control-bar  d-flex d-md-none\">\r\n        <div class=\"tool\">\r\n          <div class=\"map\" :class=\"{ active: mobileTool === 'map' }\"\r\n          @click=\"showArea('map')\">\r\n            <i class=\"bi bi-pin-map me-1\"></i>地圖\r\n          </div>\r\n          <div class=\"time\" :class=\"{ active: mobileTool === 'time' }\" v-if=\"EstimateNearList.length > 0\"\r\n          @click=\"showArea('time')\">\r\n            <i class=\"bi bi-clock me-1\"></i>預估時間\r\n          </div>\r\n          <div class=\"route\" :class=\"{ active: mobileTool === 'station' }\"\r\n          @click=\"showArea('station')\">\r\n            <i class=\"bi bi-map me-1\"></i>站牌\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"map-wrap\">\r\n      <div class=\"near-station-area active\">\r\n        <div class=\"near-station-header\">\r\n          <!-- <input type=\"search\" class=\"form-control\" id=\"stationName\" placeholder=\"想去哪裡?\"> -->\r\n          <h4 class=\"fw-700 ms-1 mb-0\">附近站牌</h4>\r\n        </div>\r\n        <div class=\"near-station-body\">\r\n          <ul class=\"near-station-list\">\r\n            <li class=\"near-station-list-item\" v-for=\"item in nearStationList\" :key=\"item.StationID\"\r\n            @click=\"getNearStaionDetail(item)\"\r\n            :class=\"{ active : item.StationUID === selectStationUID }\">\r\n              <div class=\"info\">\r\n                <div class=\"tilte\">{{ item.StationName.Zh_tw }}</div>\r\n                <div class=\"stops\">{{ item.Stops.length }} 個站牌</div>\r\n              </div>\r\n              <div class=\"distance\">\r\n                <span class=\"material-icons\">\r\n                location_on\r\n                </span>\r\n                {{ item.distanceFromLocation }}m\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"estimate-near-area\">\r\n        <a href=\"#\" class=\"return\"\r\n        @click.prevent=\"backToNearStationList()\">\r\n        <span class=\"material-icons\">chevron_left</span>\r\n        返回搜尋</a>\r\n        <div class=\"estimate-near-header\">\r\n          <div class=\"title\">\r\n            {{ selectStationName }}\r\n          </div>\r\n        </div>\r\n        <div class=\"estimate-near-body\">\r\n          <ul class=\"estimate-near-list\">\r\n            <li class=\"estimate-near-list-item\" v-for=\"item in EstimateNearList\" :key=\"item.StopUID\"\r\n            @click=\"toRouteDetail(item)\">\r\n              <!-- <div class=\"time\">{{ $filters.toMinute(item.EstimateTime) }} 分</div> -->\r\n              <div class=\"time\" :class=\"{ active : item.EstimateTime <= 180 , 'disconnect': item.StopStatus !== 0}\">\r\n                <span v-if=\"item.StopStatus === 0\">\r\n                  <span v-if=\"item.EstimateTime <= 180 && item.PlateNumb\">進站中</span>\r\n                  <span v-else-if=\"item.EstimateTime <= 180\">即將進站</span>\r\n                  <span v-else>{{  $filters.toMinute(item.EstimateTime) }}分</span>\r\n                </span>\r\n                <span v-else-if=\"item.StopStatus === 1\">尚未發車</span>\r\n                <span v-else-if=\"item.StopStatus === 2\">交管不停靠</span>\r\n                <span v-else-if=\"item.StopStatus === 3\">末班車已過</span>\r\n                <span v-else>今日未營運</span>\r\n              </div>\r\n              <div class=\"info\">\r\n                <div class=\"title\">{{ item.RouteName.Zh_tw }}</div>\r\n                <div class=\"way\" v-if=\"item.Direction === 0\">往 {{ item.DestinationStopNameZh }}</div>\r\n                <div class=\"way\" v-else>往 {{ item.DepartureStopNameZh  }}</div>\r\n              </div>\r\n              <div class=\"icon ms-auto\">\r\n                <a><span class=\"material-icons\">\r\n                favorite_border\r\n                </span></a>\r\n                {{ item.City }}\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"gps-icon\" @click=\"locateGPS()\">\r\n        <img src=\"@/assets/images/gps.svg\" class=\"icon-filter\" alt=\"gps-icon\">\r\n      </div>\r\n      <div class=\"map\" id=\"map\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport $L from 'leaflet'\r\n// import Wkt from 'wicket'\r\nlet openStreetMap = {}\r\n\r\nconst stationIcon = new $L.Icon({\r\n  iconUrl: require('@/assets/images/busStop.svg'),\r\n  iconSize: [24, 24],\r\n  iconAnchor: [12, 12],\r\n  popupAnchor: [0, -12]\r\n})\r\nconst stationSelectIcon = new $L.Icon({\r\n  iconUrl: require('@/assets/images/bus_stop_select.svg'),\r\n  iconSize: [24, 24],\r\n  iconAnchor: [12, 12],\r\n  popupAnchor: [0, -12]\r\n})\r\nconst positionIcon = new $L.Icon({\r\n  iconUrl: require('@/assets/images/position.svg'),\r\n  iconSize: [49, 49],\r\n  iconAnchor: [24, 24],\r\n  popupAnchor: [0, -24]\r\n})\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      locationMarkerID: '',\r\n      nearStationList: [],\r\n      stationMarkers: [],\r\n      lastSelectLatLon: [0, 0],\r\n      EstimateNearList: [],\r\n      selectStationName: '',\r\n      selectStationUID: '',\r\n      selectStationLatLon: [],\r\n      mobileTool: 'station'\r\n    }\r\n  },\r\n  methods: {\r\n    locateGPS () {\r\n      // 定位\r\n      navigator.geolocation.getCurrentPosition(position => {\r\n        openStreetMap.eachLayer((layer) => {\r\n          if (layer._leaflet_id === this.locationMarkerID) {\r\n            openStreetMap.removeLayer(layer)\r\n          }\r\n        })\r\n        const locate = [position.coords.latitude, position.coords.longitude]\r\n        // console.log(locate)\r\n        openStreetMap.setView(locate, 15)\r\n        document.querySelector('.gps-icon').classList.add('active')\r\n        const marker = $L.marker([position.coords.latitude, position.coords.longitude], { icon: positionIcon })\r\n        marker.addTo(openStreetMap)\r\n        this.locationMarkerID = marker._leaflet_id\r\n        this.getNearbyStation(position.coords.latitude, position.coords.longitude)\r\n      })\r\n    },\r\n    getNearbyStation (Lat, Lon) {\r\n      const url = `https://ptx.transportdata.tw/MOTC/v2/Bus/Station/NearBy?$spatialFilter=nearby(${Lat}%2C%20${Lon}%2C%201000)&$format=JSON`\r\n      console.log('目前位置', Lat, Lon)\r\n      // https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/City/Taipei/PassThrough/Station/3505?$top=30&$format=JSON\r\n      this.axios.get(url,\r\n        {\r\n          headers: this.$getAuthorizationHeader()\r\n        }\r\n      )\r\n        .then((response) => {\r\n          // console.log(response.data)\r\n          this.nearStationList = response.data\r\n          this.nearStationList.forEach((x) => {\r\n            const distance = openStreetMap.distance([Lat, Lon], [x.StationPosition.PositionLat, x.StationPosition.PositionLon])\r\n            x.distanceFromLocation = Math.floor(distance)\r\n          })\r\n          this.nearStationList.sort((a, b) => {\r\n            return a.distanceFromLocation - b.distanceFromLocation\r\n          })\r\n          this.addNearStationMarker()\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    addNearStationMarker () {\r\n      openStreetMap.eachLayer((layer) => {\r\n        if (layer._leaflet_id !== this.locationMarkerID) {\r\n          if (layer instanceof $L.Marker) {\r\n            openStreetMap.removeLayer(layer)\r\n          }\r\n          if (layer instanceof $L.Popup) {\r\n            openStreetMap.removeLayer(layer)\r\n          }\r\n        }\r\n      })\r\n      this.nearStationList.forEach((x, index) => {\r\n        const popupContent = this.createPopupContent(x)\r\n        const popup = $L.popup({\r\n          autoPan: false,\r\n          className: popupContent.status,\r\n          offset: [0, -5]\r\n        })\r\n        popup.setLatLng($L.latLng(x.StationPosition.PositionLat, x.StationPosition.PositionLon))\r\n        popup.setContent(popupContent.str)\r\n        const marker = $L.marker([x.StationPosition.PositionLat, x.StationPosition.PositionLon], { icon: stationIcon })\r\n          .bindPopup(popup)\r\n        marker.addTo(openStreetMap)\r\n        // console.log()\r\n        // for select\r\n        x.markerID = marker._leaflet_id\r\n        this.stationMarkers.push(marker)\r\n      })\r\n    },\r\n    getNearStaionDetail (item) {\r\n      // console.log(Lat, Lng)\r\n      openStreetMap.setView([item.StationPosition.PositionLat, item.StationPosition.PositionLon], 18)\r\n      this.stationMarkers.forEach((x) => {\r\n        if (x._latlng.lat === this.lastSelectLatLon[0] && x._latlng.lng === this.lastSelectLatLon[1]) {\r\n          x.setIcon(stationIcon)\r\n        }\r\n      })\r\n      this.stationMarkers.forEach((x) => {\r\n        if (x._latlng.lat === item.StationPosition.PositionLat && x._latlng.lng === item.StationPosition.PositionLon) {\r\n          x.setIcon(stationSelectIcon)\r\n          this.lastSelectLatLon = [x._latlng.lat, x._latlng.lng]\r\n        }\r\n      })\r\n      openStreetMap.eachLayer((layer) => {\r\n        if (layer._leaflet_id !== this.locationMarkerID) {\r\n          if (layer instanceof $L.Popup) {\r\n            openStreetMap.removeLayer(layer)\r\n          }\r\n        }\r\n      })\r\n      const popupContent = this.createPopupContent(item)\r\n      const popup = $L.popup({\r\n        autoPan: false,\r\n        className: 'popupSelect',\r\n        offset: [0, -5]\r\n      })\r\n      popup.setLatLng($L.latLng(item.StationPosition.PositionLat, item.StationPosition.PositionLon))\r\n      popup.setContent(popupContent.str)\r\n      openStreetMap.addLayer(popup)\r\n\r\n      this.getEstimatedTimeOfArrival(item)\r\n      document.querySelector('.near-station-area').classList.remove('active')\r\n      document.querySelector('.estimate-near-area').classList.add('active')\r\n    },\r\n    zoomLevelAddMarker () {\r\n      const zoomLevel = openStreetMap.getZoom()\r\n      // console.log(zoomLevel)\r\n      if (zoomLevel <= 16) {\r\n        this.addNearStationMarker()\r\n      } else {\r\n        openStreetMap.eachLayer((layer) => {\r\n          if (layer._leaflet_id !== this.locationMarkerID) {\r\n            if (layer instanceof $L.Popup) {\r\n              openStreetMap.removeLayer(layer)\r\n            }\r\n          }\r\n        })\r\n        this.nearStationList.forEach((x, index) => {\r\n          const popupContent = this.createPopupContent(x)\r\n          const popup = $L.popup({\r\n            autoPan: false,\r\n            className: popupContent.status,\r\n            offset: [0, -5]\r\n          })\r\n          popup.setLatLng($L.latLng(x.StationPosition.PositionLat, x.StationPosition.PositionLon))\r\n          popup.setContent(popupContent.str)\r\n          openStreetMap.addLayer(popup)\r\n        })\r\n      }\r\n    },\r\n    createPopupContent (x) {\r\n      const statusCode = 'popupPrimary'\r\n      const str = `\r\n      <div class=\"stop-popup\">\r\n        <div class=\"name\">${x.StationName.Zh_tw}</div>\r\n      </div>\r\n      `\r\n      return {\r\n        str: str,\r\n        status: statusCode\r\n      }\r\n    },\r\n    getEstimatedTimeOfArrival (item) {\r\n      this.EstimateNearList = []\r\n      const url = `https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/NearBy?$spatialFilter=nearby(${item.StationPosition.PositionLat}%2C%20${item.StationPosition.PositionLon}%2C%201000)&$format=JSON`\r\n      this.axios.get(url,\r\n        {\r\n          headers: this.$getAuthorizationHeader()\r\n        }\r\n      )\r\n        .then((response) => {\r\n          // console.log(response.data)\r\n          item.Stops.forEach((stop) => {\r\n            response.data.forEach((x) => {\r\n              if (stop.StopUID === x.StopUID) {\r\n                // console.log(x.RouteName.Zh_tw)\r\n                this.EstimateNearList.push(x)\r\n              }\r\n            })\r\n          })\r\n          // console.log(this.EstimateNearList)\r\n          this.getRouteInfo(item)\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    getRouteInfo (item) {\r\n      const url = `https://ptx.transportdata.tw/MOTC/v2/Bus/Route/NearBy?$spatialFilter=nearby(${item.StationPosition.PositionLat}%2C%20${item.StationPosition.PositionLon}%2C%201000)&$format=JSON`\r\n      this.axios.get(url,\r\n        {\r\n          headers: this.$getAuthorizationHeader()\r\n        }\r\n      )\r\n        .then((response) => {\r\n          this.EstimateNearList.forEach((stop) => {\r\n            response.data.forEach((x) => {\r\n              if (stop.RouteUID === x.RouteUID) {\r\n                // console.log(x.RouteName.Zh_tw)\r\n                stop.DepartureStopNameZh = x.DepartureStopNameZh\r\n                stop.DestinationStopNameZh = x.DestinationStopNameZh\r\n                stop.City = x.City\r\n              }\r\n            })\r\n          })\r\n          this.EstimateNearList.sort((a, b) => {\r\n            return a.RouteName.Zh_tw - b.RouteName.Zh_tw\r\n          })\r\n          // console.log(this.EstimateNearList)\r\n          this.selectStationName = item.StationName.Zh_tw\r\n          this.selectStationUID = item.StationUID\r\n          this.selectStationLatLon = [item.StationPosition.PositionLat, item.StationPosition.PositionLon]\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    backToNearStationList () {\r\n      document.querySelector('.near-station-area').classList.add('active')\r\n      document.querySelector('.estimate-near-area').classList.remove('active')\r\n    },\r\n    showArea (area) {\r\n      if (area === 'map') {\r\n        this.mobileTool = 'map'\r\n        document.querySelector('.near-station-area').classList.remove('active')\r\n        document.querySelector('.estimate-near-area').classList.remove('active')\r\n      } else if (area === 'station') {\r\n        this.mobileTool = 'station'\r\n        document.querySelector('.near-station-area').classList.add('active')\r\n        document.querySelector('.estimate-near-area').classList.remove('active')\r\n      } else if (area === 'time') {\r\n        this.mobileTool = 'time'\r\n        document.querySelector('.near-station-area').classList.remove('active')\r\n        document.querySelector('.estimate-near-area').classList.add('active')\r\n      }\r\n    },\r\n    toRouteDetail (item) {\r\n      console.log(item)\r\n      const param = {\r\n        city: item.City,\r\n        route: item.RouteName.Zh_tw,\r\n        routeUID: item.RouteUID,\r\n        direction: item.Direction,\r\n        LatLon: this.selectStationLatLon\r\n      }\r\n      const qStr = JSON.stringify(param)\r\n      this.$router.push(`/BusSearch/${qStr}`)\r\n    }\r\n  },\r\n  mounted () {\r\n    // quick start\r\n    openStreetMap = $L.map('map', {\r\n      zoomControl: false,\r\n      center: [23.51357237187571, 120.21110434230025],\r\n      zoom: 8,\r\n      tap: false\r\n    })\r\n    $L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution:\r\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(openStreetMap)\r\n\r\n    // resset zoom position\r\n    $L.control.zoom({\r\n      position: 'bottomright'\r\n    }).addTo(openStreetMap)\r\n    openStreetMap.on('moveend', function () {\r\n      document.querySelector('.gps-icon').classList.remove('active')\r\n    })\r\n    const func = this.zoomLevelAddMarker\r\n    openStreetMap.on('zoomend', function () {\r\n      func()\r\n    })\r\n    this.locateGPS()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./NearbyStation.vue?vue&type=template&id=d78b4154\"\nimport script from \"./NearbyStation.vue?vue&type=script&lang=js\"\nexport * from \"./NearbyStation.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\F2E\\\\bus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar un$Sort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? un$Sort(array) : un$Sort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","module.exports = __webpack_public_path__ + \"img/bus_stop_select.dacbc18d.svg\";","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\nvar TypeError = global.TypeError;\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = lengthOfArrayLike(E);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var arraySlice = require('../internals/array-slice');\n\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    array,\n    mergeSort(arraySlice(array, 0, middle), comparefn),\n    mergeSort(arraySlice(array, middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (array, left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n\n  while (lindex < llength || rindex < rlength) {\n    array[lindex + rindex] = (lindex < llength && rindex < rlength)\n      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n      : lindex < llength ? left[lindex++] : right[rindex++];\n  } return array;\n};\n\nmodule.exports = mergeSort;\n","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\n\nvar Array = global.Array;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar exec = uncurryThis(/./.exec);\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar replace = uncurryThis(''.replace);\nvar numberToString = uncurryThis(1.0.toString);\n\nvar tester = /[\\uD800-\\uDFFF]/g;\nvar low = /^[\\uD800-\\uDBFF]$/;\nvar hi = /^[\\uDC00-\\uDFFF]$/;\n\nvar fix = function (match, offset, string) {\n  var prev = charAt(string, offset - 1);\n  var next = charAt(string, offset + 1);\n  if ((exec(low, match) && !exec(hi, next)) || (exec(hi, match) && !exec(low, prev))) {\n    return '\\\\u' + numberToString(charCodeAt(match, 0), 16);\n  } return match;\n};\n\nvar FORCED = fails(function () {\n  return $stringify('\\uDF06\\uD834') !== '\"\\\\udf06\\\\ud834\"'\n    || $stringify('\\uDEAD') !== '\"\\\\udead\"';\n});\n\nif ($stringify) {\n  // `JSON.stringify` method\n  // https://tc39.es/ecma262/#sec-json.stringify\n  // https://github.com/tc39/proposal-well-formed-stringify\n  $({ target: 'JSON', stat: true, forced: FORCED }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      for (var i = 0, l = arguments.length, args = Array(l); i < l; i++) args[i] = arguments[i];\n      var result = apply($stringify, null, args);\n      return typeof result == 'string' ? replace(result, tester, fix) : result;\n    }\n  });\n}\n","module.exports = __webpack_public_path__ + \"img/busStop.2fb86a4d.svg\";"],"sourceRoot":""}