{"version":3,"sources":["webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./src/views/StopSearch.vue","webpack:///./src/views/StopSearch.vue?087a"],"names":["global","DOMIterables","DOMTokenListPrototype","forEach","createNonEnumerableProperty","handlePrototype","CollectionPrototype","error","COLLECTION_NAME","prototype","$forEach","arrayMethodIsStrict","STRICT_METHOD","module","exports","callbackfn","this","arguments","length","undefined","$","$filter","filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","fails","isArray","isObject","toObject","lengthOfArrayLike","createProperty","arraySpeciesCreate","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","TypeError","IS_CONCAT_SPREADABLE_SUPPORT","array","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","FORCED","arg","i","k","len","E","A","n","class","id","src","alt","active","isLoading","z-index","city","getAllStationFromCity","cityList","value","City","key","CityName","list","placeholder","selectStationName","getStationData","optiondata","option","index","selectRouteData","item","RouteUID","toRouteDetail","RouteName","Zh_tw","href","updateLikes","buslikesId","includes","DepartureStopNameZh","DestinationStopNameZh","$filters","replaceCity","locateGPS","openStreetMap","positionIcon","Icon","iconUrl","iconSize","iconAnchor","popupAnchor","data","locationMarkerID","selectStationData","selectStationRouteID","buslikes","methods","navigator","geolocation","getCurrentPosition","position","eachLayer","layer","_leaflet_id","removeLayer","locate","coords","latitude","longitude","console","log","setView","document","querySelector","classList","add","marker","icon","addTo","url","axios","get","headers","$getAuthorizationHeader","then","response","map","x","StationName","indexOf","catch","err","tempArr","push","Stops","getRouteData","event","tagName","param","route","routeUID","direction","LatLon","StationPosition","PositionLat","PositionLon","qStr","encodeURIComponent","JSON","stringify","$router","getLikes","likeStr","localStorage","getItem","parse","router","res","message","success","splice","$httpMessageState","routeName","start","end","saveLocalStorage","datastr","setItem","e","watch","handler","o","deep","mounted","zoomControl","center","zoom","tap","tileLayer","attribution","control","on","remove","__exports__","render"],"mappings":"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","file":"js/chunk-4d7d7bb3.ab31d54d.js","sourcesContent":["var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar DOMTokenListPrototype = require('../internals/dom-token-list-prototype');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar handlePrototype = function (CollectionPrototype) {\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  if (DOMIterables[COLLECTION_NAME]) {\n    handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);\n  }\n}\n\nhandlePrototype(DOMTokenListPrototype);\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\nvar TypeError = global.TypeError;\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = lengthOfArrayLike(E);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","<template>\r\n  <Loading :active=\"isLoading\"\r\n  :z-index=\"2000\">\r\n  </Loading>\r\n  <div class=\"h-100 d-flex flex-column\">\r\n    <div class=\"bread-bar\">\r\n      <ol class=\"breadcrumb m-0\">\r\n        <li class=\"breadcrumb-item\"><a href=\"#\">首頁</a></li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">站點查詢</li>\r\n      </ol>\r\n    </div>\r\n    <div class=\"map-wrap\">\r\n      <div class=\"route-search-area active\">\r\n        <div class=\"route-search-header\">\r\n          <select class=\"form-select mb-2\" v-model=\"city\"\r\n          @change=\"getAllStationFromCity()\">\r\n            <option :value=\"city.City\" v-for=\"city in cityList\" :key=\"city.City\">{{ city.CityName }}</option>\r\n          </select>\r\n          <input list=\"datalistOptions\" class=\"form-control\" id=\"stationName\" placeholder=\"想去哪裡?\"\r\n          v-model=\"selectStationName\"\r\n          @change=\"getStationData()\">\r\n          <datalist id=\"datalistOptions\">\r\n            <option :value=\"option\" v-for=\"(option, index) in optiondata\" :key=\"index\"></option>\r\n          </datalist>\r\n        </div>\r\n        <div class=\"route-search-body\">\r\n          <ul class=\"route-list\">\r\n            <li class=\"route-list-item\" v-for=\"item in selectRouteData\" :key=\"item.RouteUID\"\r\n            @click=\"toRouteDetail(item)\">\r\n              <div class=\"d-flex justify-content-between\">\r\n                <div class=\"title\">{{ item.RouteName.Zh_tw }}</div>\r\n                <div class=\"icon\">\r\n                  <a href=\"#\"\r\n                  @click.prevent=\"updateLikes(item)\">\r\n                  <span class=\"material-icons love\" v-if=\"buslikesId.includes(item.RouteUID)\">\r\n                    favorite\r\n                  </span>\r\n                  <span class=\"material-icons\" v-else>\r\n                    favorite_border\r\n                  </span>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div class=\"d-flex justify-content-between\">\r\n                <div class=\"od\">{{ item.DepartureStopNameZh }}-{{ item.DestinationStopNameZh }}</div>\r\n                <div class=\"city\"><span v-if=\"item.City\">{{ $filters.replaceCity(item.City) }}</span></div>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"gps-icon\" @click=\"locateGPS()\">\r\n        <img src=\"@/assets/images/gps.svg\" class=\"icon-filter\" alt=\"gps-icon\">\r\n      </div>\r\n      <div class=\"map\" id=\"map\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport $L from 'leaflet'\r\nimport cityList from '@/assets/CityList.json'\r\n// import Wkt from 'wicket'\r\nlet openStreetMap = {}\r\n\r\n// const stationIcon = new $L.Icon({\r\n//   iconUrl: require('@/assets/images/busStop.svg'),\r\n//   iconSize: [24, 24],\r\n//   iconAnchor: [12, 12],\r\n//   popupAnchor: [0, -12]\r\n// })\r\nconst positionIcon = new $L.Icon({\r\n  iconUrl: require('@/assets/images/position.svg'),\r\n  iconSize: [49, 49],\r\n  iconAnchor: [24, 24],\r\n  popupAnchor: [0, -24]\r\n})\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      locationMarkerID: '',\r\n      optiondata: [],\r\n      selectStationName: '',\r\n      selectStationData: [],\r\n      selectStationRouteID: [],\r\n      selectRouteData: [],\r\n      buslikes: [],\r\n      buslikesId: [],\r\n      city: 'Taipei',\r\n      cityList\r\n    }\r\n  },\r\n  methods: {\r\n    locateGPS () {\r\n      // 定位\r\n      navigator.geolocation.getCurrentPosition(position => {\r\n        openStreetMap.eachLayer((layer) => {\r\n          if (layer._leaflet_id === this.locationMarkerID) {\r\n            openStreetMap.removeLayer(layer)\r\n          }\r\n        })\r\n        const locate = [position.coords.latitude, position.coords.longitude]\r\n        console.log(locate)\r\n        openStreetMap.setView(locate, 15)\r\n        document.querySelector('.gps-icon').classList.add('active')\r\n        const marker = $L.marker([position.coords.latitude, position.coords.longitude], { icon: positionIcon })\r\n        marker.addTo(openStreetMap)\r\n        this.locationMarkerID = marker._leaflet_id\r\n      })\r\n    },\r\n    getAllStationFromCity () {\r\n      const url = `https://ptx.transportdata.tw/MOTC/v2/Bus/Station/City/${this.city}?$select=StationName&$format=JSON`\r\n      this.axios.get(url,\r\n        {\r\n          headers: this.$getAuthorizationHeader()\r\n        }\r\n      )\r\n        .then((response) => {\r\n          // console.log(response.data)\r\n          this.optiondata = response.data.map((x) => { return x.StationName.Zh_tw })\r\n          this.optiondata = this.optiondata.filter((value, index, array) => array.indexOf(value) === index)\r\n          this.getStationData()\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    getStationData () {\r\n      const url = `https://ptx.transportdata.tw/MOTC/v2/Bus/Station/City/${this.city}?$filter=StationName%2FZh_tw%20eq%20'${this.selectStationName}'&$format=JSON`\r\n      this.axios.get(url,\r\n        {\r\n          headers: this.$getAuthorizationHeader()\r\n        }\r\n      )\r\n        .then((response) => {\r\n          this.selectStationData = response.data\r\n          const tempArr = []\r\n          response.data.forEach((x) => {\r\n            tempArr.push(x.Stops.map((x) => { return x.RouteUID }))\r\n          })\r\n          this.selectStationRouteID = [].concat(...tempArr)\r\n          this.selectStationRouteID = this.selectStationRouteID.filter((value, index, array) => array.indexOf(value) === index)\r\n          console.log(this.selectStationRouteID)\r\n          this.getRouteData()\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    getRouteData () {\r\n      // console.log(this.selectStationName)\r\n      const url = `https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/${this.city}?$format=JSON`\r\n      this.axios.get(url,\r\n        {\r\n          headers: this.$getAuthorizationHeader()\r\n        }\r\n      )\r\n        .then((response) => {\r\n          // console.log(response.data)\r\n          this.selectRouteData = response.data.filter((x) => {\r\n            if (this.selectStationRouteID.includes(x.RouteUID)) return x\r\n          })\r\n          console.log(this.selectRouteData)\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    toRouteDetail (item) {\r\n      console.log(item)\r\n      if (event.target.tagName !== 'SPAN') {\r\n        const param = {\r\n          city: item.City,\r\n          route: item.RouteName.Zh_tw,\r\n          routeUID: item.RouteUID,\r\n          direction: 0,\r\n          LatLon: [this.selectStationData[0].StationPosition.PositionLat, this.selectStationData[0].StationPosition.PositionLon]\r\n        }\r\n        const qStr = encodeURIComponent(JSON.stringify(param))\r\n        this.$router.push(`/BusSearch/${qStr}`)\r\n      }\r\n    },\r\n    getLikes () {\r\n      // console.log(localStorage.getItem('likelist'))\r\n      const likeStr = localStorage.getItem('busLikes') ? localStorage.getItem('busLikes') : '[]'\r\n      this.buslikes = JSON.parse(likeStr)\r\n      this.buslikesId = this.buslikes.map(x => { return x.routeUID })\r\n      console.log(this.buslikesId)\r\n    },\r\n    updateLikes (router) {\r\n      const res = {\r\n        data: {\r\n          data: {},\r\n          message: '收藏',\r\n          success: true\r\n        }\r\n      }\r\n      if (this.buslikesId.includes(router.RouteUID)) {\r\n        this.buslikes.splice(this.buslikes.map(x => { return x.routeUID }).indexOf(router.RouteUID), 1)\r\n        this.buslikesId.splice(this.buslikesId.indexOf(router.RouteUID), 1)\r\n        this.$httpMessageState(res, '移除收藏')\r\n      } else {\r\n        this.buslikes.push({\r\n          routeUID: router.RouteUID,\r\n          routeName: router.RouteName.Zh_tw,\r\n          start: router.DepartureStopNameZh,\r\n          end: router.DestinationStopNameZh,\r\n          city: router.City\r\n        })\r\n        this.buslikesId.push(router.RouteUID)\r\n        this.$httpMessageState(res, '加入收藏')\r\n      }\r\n      // console.log(this.buslikes)\r\n    },\r\n    saveLocalStorage (data) {\r\n      const datastr = JSON.stringify(data)\r\n      try {\r\n        localStorage.setItem('busLikes', datastr)\r\n      } catch (e) {\r\n        return false\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    buslikes: {\r\n      handler (n, o) {\r\n        this.saveLocalStorage(this.buslikes)\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  mounted () {\r\n    // quick start\r\n    openStreetMap = $L.map('map', {\r\n      zoomControl: false,\r\n      center: [25.0834397, 121.4570441],\r\n      zoom: 13,\r\n      tap: false\r\n    })\r\n    $L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution:\r\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(openStreetMap)\r\n\r\n    // resset zoom position\r\n    $L.control.zoom({\r\n      position: 'bottomright'\r\n    }).addTo(openStreetMap)\r\n    openStreetMap.on('moveend', function () {\r\n      document.querySelector('.gps-icon').classList.remove('active')\r\n    })\r\n    this.locateGPS()\r\n    this.getLikes()\r\n    this.getAllStationFromCity()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./StopSearch.vue?vue&type=template&id=64d482ff\"\nimport script from \"./StopSearch.vue?vue&type=script&lang=js\"\nexport * from \"./StopSearch.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\F2E\\\\bus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}