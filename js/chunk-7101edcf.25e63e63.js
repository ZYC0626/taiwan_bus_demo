(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7101edcf"],{2532:function(e,t,c){"use strict";var i=c("23e7"),r=c("e330"),o=c("5a34"),n=c("1d80"),a=c("577e"),s=c("ab13"),u=r("".indexOf);i({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~u(a(n(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,c){var i=c("861d"),r=c("c6b6"),o=c("b622"),n=o("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==r(e))}},"5a34":function(e,t,c){var i=c("da84"),r=c("44e7"),o=i.TypeError;e.exports=function(e){if(r(e))throw o("The method doesn't accept regular expressions");return e}},8418:function(e,t,c){"use strict";var i=c("a04b"),r=c("9bf2"),o=c("5c6c");e.exports=function(e,t,c){var n=i(t);n in e?r.f(e,n,o(0,c)):e[n]=c}},"88f2":function(e,t,c){"use strict";c.r(t);c("caad"),c("2532");var i=c("7a23"),r=c("42f0"),o=c.n(r),n={class:"h-100 d-flex flex-column"},a=Object(i["i"])('<div class="bread-bar"><ol class="breadcrumb m-0 d-md-flex d-none"><li class="breadcrumb-item"><a href="#">首頁</a></li><li class="breadcrumb-item active" aria-current="page">收藏站牌</li></ol></div>',1),s={class:"map-wrap"},u={class:"route-search-area active"},l=Object(i["h"])("div",{class:"route-search-header"},[Object(i["h"])("h4",{class:"fw-700 ms-1 mb-0"},"收藏站牌")],-1),d={class:"route-search-body"},b={key:0,class:"route-list"},f=["onClick"],h={class:"d-flex justify-content-between"},p={class:"title"},g={class:"icon"},v=["onClick"],O={key:0,class:"material-icons love"},m={key:1,class:"material-icons"},j={class:"d-flex justify-content-between"},k={class:"od"},y={class:"city"},w={key:1,class:"fw-700 text-center",style:{"font-size":"18px",color:"#888888"}},I=Object(i["j"])("目前還沒有收藏的站牌!"),x=Object(i["h"])("br",null,null,-1),D=Object(i["j"])(" 快用"),S=Object(i["h"])("span",{class:"material-icons mx-2",style:{"font-size":"18px",color:"#888888"}},"favorite_border",-1),L=Object(i["j"])("來收藏站牌吧"),U=[I,x,D,S,L],N=Object(i["h"])("img",{src:o.a,class:"icon-filter",alt:"gps-icon"},null,-1),C=[N],z=Object(i["h"])("div",{class:"map",id:"map"},null,-1);function A(e,t,c,r,o,I){var x=Object(i["D"])("Loading");return Object(i["w"])(),Object(i["g"])(i["a"],null,[Object(i["k"])(x,{active:o.isLoading,"z-index":2e3},null,8,["active"]),Object(i["h"])("div",n,[a,Object(i["h"])("div",s,[Object(i["h"])("div",u,[l,Object(i["h"])("div",d,[o.buslikes.length>0?(Object(i["w"])(),Object(i["g"])("ul",b,[(Object(i["w"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(o.buslikes,(function(t){return Object(i["w"])(),Object(i["g"])("li",{class:"route-list-item",key:t.routeUID,onClick:function(e){return I.toRouteDetail(t)}},[Object(i["h"])("div",h,[Object(i["h"])("div",p,Object(i["G"])(t.routeName),1),Object(i["h"])("div",g,[Object(i["h"])("a",{href:"#",onClick:Object(i["N"])((function(e){return I.updateLikes(t)}),["prevent"])},[o.buslikesId.includes(t.routeUID)?(Object(i["w"])(),Object(i["g"])("span",O," favorite ")):(Object(i["w"])(),Object(i["g"])("span",m," favorite_border "))],8,v)])]),Object(i["h"])("div",j,[Object(i["h"])("div",k,Object(i["G"])(t.start)+"-"+Object(i["G"])(t.end),1),Object(i["h"])("div",y,Object(i["G"])(e.$filters.replaceCity(t.city)),1)])],8,f)})),128))])):(Object(i["w"])(),Object(i["g"])("h5",w,U))])]),Object(i["h"])("div",{class:"gps-icon",onClick:t[0]||(t[0]=function(e){return I.locateGPS()})},C),z])])],64)}c("d81d"),c("a434"),c("e9c4");var F=c("e11e"),G=c.n(F),J=c("cc8c"),M={},T=new G.a.Icon({iconUrl:c("e275"),iconSize:[49,49],iconAnchor:[24,24],popupAnchor:[0,-24]}),_={data:function(){return{isLoading:!1,locationMarkerID:"",buslikes:[],buslikesId:[],cityList:J}},methods:{locateGPS:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){M.eachLayer((function(t){t._leaflet_id===e.locationMarkerID&&M.removeLayer(t)}));var c=[t.coords.latitude,t.coords.longitude];console.log(c),M.setView(c,15),document.querySelector(".gps-icon").classList.add("active");var i=G.a.marker([t.coords.latitude,t.coords.longitude],{icon:T});i.addTo(M),e.locationMarkerID=i._leaflet_id}))},getLikes:function(){var e=localStorage.getItem("busLikes")?localStorage.getItem("busLikes"):"[]";this.buslikes=JSON.parse(e),this.buslikesId=this.buslikes.map((function(e){return e.routeUID})),console.log(this.buslikesId)},updateLikes:function(e){this.buslikesId.includes(e.routeUID)?(this.buslikes.splice(this.buslikes.map((function(e){return e.routeUID})).indexOf(e.routeUID),1),this.buslikesId.splice(this.buslikesId.indexOf(e.routeUID),1)):(this.buslikes.push({routeUID:e.routeUID,routeName:e.routeName,start:e.start,end:e.end,city:e.city}),this.buslikesId.push(e.routeUID))},saveLocalStorage:function(e){var t=JSON.stringify(e);try{localStorage.setItem("busLikes",t)}catch(c){return!1}},toRouteDetail:function(e){if("SPAN"!==event.target.tagName){console.log(e);var t={city:e.city,route:e.routeName,routeUID:e.routeUID,direction:0,LatLon:[]},c=JSON.stringify(t);this.$router.push("/BusSearch/".concat(c))}}},watch:{buslikes:{handler:function(e,t){this.saveLocalStorage(this.buslikes)},deep:!0}},mounted:function(){M=G.a.map("map",{zoomControl:!1,center:[25.0834397,121.4570441],zoom:13,tap:!1}),G.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(M),G.a.control.zoom({position:"bottomright"}).addTo(M),M.on("moveend",(function(){document.querySelector(".gps-icon").classList.remove("active")})),this.locateGPS(),this.getLikes()}},P=c("6b0d"),$=c.n(P);const B=$()(_,[["render",A]]);t["default"]=B},a434:function(e,t,c){"use strict";var i=c("23e7"),r=c("da84"),o=c("23cb"),n=c("5926"),a=c("07fa"),s=c("7b0b"),u=c("65f0"),l=c("8418"),d=c("1dde"),b=d("splice"),f=r.TypeError,h=Math.max,p=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!b},{splice:function(e,t){var c,i,r,d,b,O,m=s(this),j=a(m),k=o(e,j),y=arguments.length;if(0===y?c=i=0:1===y?(c=0,i=j-k):(c=y-2,i=p(h(n(t),0),j-k)),j+c-i>g)throw f(v);for(r=u(m,i),d=0;d<i;d++)b=k+d,b in m&&l(r,d,m[b]);if(r.length=i,c<i){for(d=k;d<j-i;d++)b=d+i,O=d+c,b in m?m[O]=m[b]:delete m[O];for(d=j;d>j-i+c;d--)delete m[d-1]}else if(c>i)for(d=j-i;d>k;d--)b=d+i-1,O=d+c-1,b in m?m[O]=m[b]:delete m[O];for(d=0;d<c;d++)m[d+k]=arguments[d+2];return m.length=j-i+c,r}})},ab13:function(e,t,c){var i=c("b622"),r=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(c){try{return t[r]=!1,"/./"[e](t)}catch(i){}}return!1}},caad:function(e,t,c){"use strict";var i=c("23e7"),r=c("4d64").includes,o=c("44d2");i({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},e9c4:function(e,t,c){var i=c("23e7"),r=c("da84"),o=c("d066"),n=c("2ba4"),a=c("e330"),s=c("d039"),u=r.Array,l=o("JSON","stringify"),d=a(/./.exec),b=a("".charAt),f=a("".charCodeAt),h=a("".replace),p=a(1..toString),g=/[\uD800-\uDFFF]/g,v=/^[\uD800-\uDBFF]$/,O=/^[\uDC00-\uDFFF]$/,m=function(e,t,c){var i=b(c,t-1),r=b(c,t+1);return d(v,e)&&!d(O,r)||d(O,e)&&!d(v,i)?"\\u"+p(f(e,0),16):e},j=s((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&i({target:"JSON",stat:!0,forced:j},{stringify:function(e,t,c){for(var i=0,r=arguments.length,o=u(r);i<r;i++)o[i]=arguments[i];var a=n(l,null,o);return"string"==typeof a?h(a,g,m):a}})}}]);
//# sourceMappingURL=chunk-7101edcf.25e63e63.js.map