{"version":3,"sources":["webpack:///./node_modules/core-js/internals/engine-ff-version.js","webpack:///./src/views/NearbyStation.vue","webpack:///./src/views/NearbyStation.vue?5599","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./node_modules/core-js/internals/engine-webkit-version.js","webpack:///./src/assets/images/bus_stop_select.svg","webpack:///./node_modules/core-js/internals/array-sort.js","webpack:///./node_modules/core-js/internals/engine-is-ie-or-edge.js"],"names":["userAgent","firefox","match","module","exports","class","href","aria-current","src","alt","id","mobileTool","showArea","EstimateNearList","length","nearStationList","item","StationUID","selectStationUID","key","StationID","getNearStaionDetail","StationName","Zh_tw","Stops","distanceFromLocation","backToNearStationList","selectStationName","StopUID","EstimateTime","StopStatus","PlateNumb","$filters","toMinute","RouteName","Direction","DestinationStopNameZh","DepartureStopNameZh","City","locateGPS","openStreetMap","stationIcon","Icon","iconUrl","iconSize","iconAnchor","popupAnchor","stationSelectIcon","positionIcon","data","locationMarkerID","stationMarkers","lastSelectLatLon","methods","navigator","geolocation","getCurrentPosition","position","eachLayer","layer","_leaflet_id","removeLayer","locate","coords","latitude","longitude","setView","document","querySelector","classList","add","marker","icon","addTo","getNearbyStation","Lat","Lon","url","this","axios","get","headers","$getAuthorizationHeader","then","response","forEach","x","distance","StationPosition","PositionLat","PositionLon","Math","floor","sort","a","b","addNearStationMarker","catch","err","console","log","Marker","Popup","index","popupContent","createPopupContent","popup","autoPan","className","status","offset","setLatLng","latLng","setContent","str","bindPopup","markerID","push","_latlng","lat","lng","setIcon","addLayer","getEstimatedTimeOfArrival","remove","window","innerWidth","zoomLevelAddMarker","zoomLevel","getZoom","statusCode","stop","getRouteInfo","RouteUID","area","mounted","map","zoomControl","center","zoom","tap","tileLayer","attribution","control","on","func","__exports__","render","$","uncurryThis","aCallable","toObject","lengthOfArrayLike","toString","fails","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","test","un$Sort","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","value","result","String","fromCharCode","k","v","charAt","FORCED","getSortCompare","comparefn","y","target","proto","forced","array","itemsLength","items","arrayLength","webkit","arraySlice","mergeSort","middle","insertionSort","merge","element","j","i","left","right","llength","rlength","lindex","rindex","UA"],"mappings":"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","file":"js/chunk-730e92fa.778d3741.js","sourcesContent":["var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","<template>\r\n  <div class=\"h-100 d-flex flex-column\">\r\n    <div class=\"bread-bar d-flex justify-content-between\">\r\n      <ol class=\"breadcrumb m-0\">\r\n        <li class=\"breadcrumb-item\"><a href=\"#\">首頁</a></li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">附近站牌</li>\r\n      </ol>\r\n      <div class=\"mobile-control-bar  d-flex d-md-none\">\r\n        <div class=\"tool\">\r\n          <div class=\"map\" :class=\"{ active: mobileTool === 'map' }\"\r\n          @click=\"showArea('map')\">\r\n            <i class=\"bi bi-pin-map me-1\"></i>地圖\r\n          </div>\r\n          <div class=\"time\" :class=\"{ active: mobileTool === 'time' }\" v-if=\"EstimateNearList.length > 0\"\r\n          @click=\"showArea('time')\">\r\n            <i class=\"bi bi-clock me-1\"></i>預估時間\r\n          </div>\r\n          <div class=\"route\" :class=\"{ active: mobileTool === 'station' }\"\r\n          @click=\"showArea('station')\">\r\n            <i class=\"bi bi-map me-1\"></i>站牌\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"map-wrap\">\r\n      <div class=\"near-station-area active\">\r\n        <div class=\"near-station-header\">\r\n          <!-- <input type=\"search\" class=\"form-control\" id=\"stationName\" placeholder=\"想去哪裡?\"> -->\r\n        </div>\r\n        <div class=\"near-station-body\">\r\n          <ul class=\"near-station-list\">\r\n            <li class=\"near-station-list-item\" v-for=\"item in nearStationList\" :key=\"item.StationID\"\r\n            @click=\"getNearStaionDetail(item)\"\r\n            :class=\"{ active : item.StationUID === selectStationUID }\">\r\n              <div class=\"info\">\r\n                <div class=\"tilte\">{{ item.StationName.Zh_tw }}</div>\r\n                <div class=\"stops\">{{ item.Stops.length }} 個站牌</div>\r\n              </div>\r\n              <div class=\"distance\">\r\n                <span class=\"material-icons\">\r\n                location_on\r\n                </span>\r\n                {{ item.distanceFromLocation }}m\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"estimate-near-area\">\r\n        <a href=\"#\" class=\"return\"\r\n        @click.prevent=\"backToNearStationList()\">\r\n        <span class=\"material-icons\">chevron_left</span>\r\n        返回搜尋</a>\r\n        <div class=\"estimate-near-header\">\r\n          <div class=\"title\">\r\n            {{ selectStationName }}\r\n          </div>\r\n        </div>\r\n        <div class=\"estimate-near-body\">\r\n          <ul class=\"estimate-near-list\">\r\n            <li class=\"estimate-near-list-item\" v-for=\"item in EstimateNearList\" :key=\"item.StopUID\">\r\n              <!-- <div class=\"time\">{{ $filters.toMinute(item.EstimateTime) }} 分</div> -->\r\n              <div class=\"time\" :class=\"{ active : item.EstimateTime <= 180 , 'disconnect': item.StopStatus !== 0}\">\r\n                <span v-if=\"item.StopStatus === 0\">\r\n                  <span v-if=\"item.EstimateTime <= 180 && item.PlateNumb\">進站中</span>\r\n                  <span v-else-if=\"item.EstimateTime <= 180\">即將進站</span>\r\n                  <span v-else>{{  $filters.toMinute(item.EstimateTime) }}分</span>\r\n                </span>\r\n                <span v-else-if=\"item.StopStatus === 1\">尚未發車</span>\r\n                <span v-else-if=\"item.StopStatus === 2\">交管不停靠</span>\r\n                <span v-else-if=\"item.StopStatus === 3\">末班車已過</span>\r\n                <span v-else>今日未營運</span>\r\n              </div>\r\n              <div class=\"info\">\r\n                <div class=\"title\">{{ item.RouteName.Zh_tw }}</div>\r\n                <div class=\"way\" v-if=\"item.Direction === 0\">往 {{ item.DestinationStopNameZh }}</div>\r\n                <div class=\"way\" v-else>往 {{ item.DepartureStopNameZh  }}</div>\r\n              </div>\r\n              <div class=\"icon ms-auto\">\r\n                <a href=\"#\"><span class=\"material-icons\">\r\n                favorite_border\r\n                </span></a>\r\n                {{ item.City }}\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"gps-icon\" @click=\"locateGPS()\">\r\n        <img src=\"@/assets/images/gps.svg\" class=\"icon-filter\" alt=\"gps-icon\">\r\n      </div>\r\n      <div class=\"map\" id=\"map\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport $L from 'leaflet'\r\n// import Wkt from 'wicket'\r\nlet openStreetMap = {}\r\n\r\nconst stationIcon = new $L.Icon({\r\n  iconUrl: require('@/assets/images/busStop.svg'),\r\n  iconSize: [24, 24],\r\n  iconAnchor: [12, 12],\r\n  popupAnchor: [0, -12]\r\n})\r\nconst stationSelectIcon = new $L.Icon({\r\n  iconUrl: require('@/assets/images/bus_stop_select.svg'),\r\n  iconSize: [24, 24],\r\n  iconAnchor: [12, 12],\r\n  popupAnchor: [0, -12]\r\n})\r\nconst positionIcon = new $L.Icon({\r\n  iconUrl: require('@/assets/images/position.svg'),\r\n  iconSize: [49, 49],\r\n  iconAnchor: [24, 24],\r\n  popupAnchor: [0, -24]\r\n})\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      locationMarkerID: '',\r\n      nearStationList: [],\r\n      stationMarkers: [],\r\n      lastSelectLatLon: [0, 0],\r\n      EstimateNearList: [],\r\n      selectStationName: '',\r\n      selectStationUID: '',\r\n      mobileTool: 'station'\r\n    }\r\n  },\r\n  methods: {\r\n    locateGPS () {\r\n      // 定位\r\n      navigator.geolocation.getCurrentPosition(position => {\r\n        openStreetMap.eachLayer((layer) => {\r\n          if (layer._leaflet_id === this.locationMarkerID) {\r\n            openStreetMap.removeLayer(layer)\r\n          }\r\n        })\r\n        const locate = [position.coords.latitude, position.coords.longitude]\r\n        // console.log(locate)\r\n        openStreetMap.setView(locate, 15)\r\n        document.querySelector('.gps-icon').classList.add('active')\r\n        const marker = $L.marker([position.coords.latitude, position.coords.longitude], { icon: positionIcon })\r\n        marker.addTo(openStreetMap)\r\n        this.locationMarkerID = marker._leaflet_id\r\n        this.getNearbyStation(position.coords.latitude, position.coords.longitude)\r\n      })\r\n    },\r\n    getNearbyStation (Lat, Lon) {\r\n      const url = 'https://ptx.transportdata.tw/MOTC/v2/Bus/Station/NearBy?$spatialFilter=nearby(25.0544128%2C%20121.454592%2C%201000)&$format=JSON'\r\n      // https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/City/Taipei/PassThrough/Station/3505?$top=30&$format=JSON\r\n      this.axios.get(url,\r\n        {\r\n          headers: this.$getAuthorizationHeader()\r\n        }\r\n      )\r\n        .then((response) => {\r\n          // console.log(response.data)\r\n          this.nearStationList = response.data\r\n          this.nearStationList.forEach((x) => {\r\n            const distance = openStreetMap.distance([Lat, Lon], [x.StationPosition.PositionLat, x.StationPosition.PositionLon])\r\n            x.distanceFromLocation = Math.floor(distance)\r\n          })\r\n          this.nearStationList.sort((a, b) => {\r\n            return a.distanceFromLocation - b.distanceFromLocation\r\n          })\r\n          this.addNearStationMarker()\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    addNearStationMarker () {\r\n      openStreetMap.eachLayer((layer) => {\r\n        if (layer._leaflet_id !== this.locationMarkerID) {\r\n          if (layer instanceof $L.Marker) {\r\n            openStreetMap.removeLayer(layer)\r\n          }\r\n          if (layer instanceof $L.Popup) {\r\n            openStreetMap.removeLayer(layer)\r\n          }\r\n        }\r\n      })\r\n      this.nearStationList.forEach((x, index) => {\r\n        const popupContent = this.createPopupContent(x)\r\n        const popup = $L.popup({\r\n          autoPan: false,\r\n          className: popupContent.status,\r\n          offset: [0, -5]\r\n        })\r\n        popup.setLatLng($L.latLng(x.StationPosition.PositionLat, x.StationPosition.PositionLon))\r\n        popup.setContent(popupContent.str)\r\n        const marker = $L.marker([x.StationPosition.PositionLat, x.StationPosition.PositionLon], { icon: stationIcon })\r\n          .bindPopup(popup)\r\n        marker.addTo(openStreetMap)\r\n        // console.log()\r\n        // for select\r\n        x.markerID = marker._leaflet_id\r\n        this.stationMarkers.push(marker)\r\n      })\r\n    },\r\n    getNearStaionDetail (item) {\r\n      // console.log(Lat, Lng)\r\n      openStreetMap.setView([item.StationPosition.PositionLat, item.StationPosition.PositionLon], 18)\r\n      this.stationMarkers.forEach((x) => {\r\n        if (x._latlng.lat === this.lastSelectLatLon[0] && x._latlng.lng === this.lastSelectLatLon[1]) {\r\n          x.setIcon(stationIcon)\r\n        }\r\n      })\r\n      this.stationMarkers.forEach((x) => {\r\n        if (x._latlng.lat === item.StationPosition.PositionLat && x._latlng.lng === item.StationPosition.PositionLon) {\r\n          x.setIcon(stationSelectIcon)\r\n          this.lastSelectLatLon = [x._latlng.lat, x._latlng.lng]\r\n        }\r\n      })\r\n      openStreetMap.eachLayer((layer) => {\r\n        if (layer._leaflet_id !== this.locationMarkerID) {\r\n          if (layer instanceof $L.Popup) {\r\n            openStreetMap.removeLayer(layer)\r\n          }\r\n        }\r\n      })\r\n      const popupContent = this.createPopupContent(item)\r\n      const popup = $L.popup({\r\n        autoPan: false,\r\n        className: 'popupSelect',\r\n        offset: [0, -5]\r\n      })\r\n      popup.setLatLng($L.latLng(item.StationPosition.PositionLat, item.StationPosition.PositionLon))\r\n      popup.setContent(popupContent.str)\r\n      openStreetMap.addLayer(popup)\r\n\r\n      this.getEstimatedTimeOfArrival(item)\r\n      document.querySelector('.near-station-area').classList.remove('active')\r\n      document.querySelector('.estimate-near-area').classList.add('active')\r\n      if (window.innerWidth < 768) {\r\n        // this.showArea('map')\r\n      }\r\n    },\r\n    zoomLevelAddMarker () {\r\n      const zoomLevel = openStreetMap.getZoom()\r\n      // console.log(zoomLevel)\r\n      if (zoomLevel <= 16) {\r\n        this.addNearStationMarker()\r\n      } else {\r\n        openStreetMap.eachLayer((layer) => {\r\n          if (layer._leaflet_id !== this.locationMarkerID) {\r\n            if (layer instanceof $L.Popup) {\r\n              openStreetMap.removeLayer(layer)\r\n            }\r\n          }\r\n        })\r\n        this.nearStationList.forEach((x, index) => {\r\n          const popupContent = this.createPopupContent(x)\r\n          const popup = $L.popup({\r\n            autoPan: false,\r\n            className: popupContent.status,\r\n            offset: [0, -5]\r\n          })\r\n          popup.setLatLng($L.latLng(x.StationPosition.PositionLat, x.StationPosition.PositionLon))\r\n          popup.setContent(popupContent.str)\r\n          openStreetMap.addLayer(popup)\r\n        })\r\n      }\r\n    },\r\n    createPopupContent (x) {\r\n      const statusCode = 'popupPrimary'\r\n      const str = `\r\n      <div class=\"stop-popup\">\r\n        <div class=\"name\">${x.StationName.Zh_tw}</div>\r\n      </div>\r\n      `\r\n      return {\r\n        str: str,\r\n        status: statusCode\r\n      }\r\n    },\r\n    getEstimatedTimeOfArrival (item) {\r\n      this.EstimateNearList = []\r\n      const url = `https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/NearBy?$spatialFilter=nearby(${item.StationPosition.PositionLat}%2C%20${item.StationPosition.PositionLon}%2C%201000)&$format=JSON`\r\n      this.axios.get(url,\r\n        {\r\n          headers: this.$getAuthorizationHeader()\r\n        }\r\n      )\r\n        .then((response) => {\r\n          // console.log(response.data)\r\n          item.Stops.forEach((stop) => {\r\n            response.data.forEach((x) => {\r\n              if (stop.StopUID === x.StopUID) {\r\n                // console.log(x.RouteName.Zh_tw)\r\n                this.EstimateNearList.push(x)\r\n              }\r\n            })\r\n          })\r\n          // console.log(this.EstimateNearList)\r\n          this.getRouteInfo(item)\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    getRouteInfo (item) {\r\n      const url = `https://ptx.transportdata.tw/MOTC/v2/Bus/Route/NearBy?$spatialFilter=nearby(${item.StationPosition.PositionLat}%2C%20${item.StationPosition.PositionLon}%2C%201000)&$format=JSON`\r\n      this.axios.get(url,\r\n        {\r\n          headers: this.$getAuthorizationHeader()\r\n        }\r\n      )\r\n        .then((response) => {\r\n          // console.log(response.data)\r\n          this.EstimateNearList.forEach((stop) => {\r\n            response.data.forEach((x) => {\r\n              if (stop.RouteUID === x.RouteUID) {\r\n                // console.log(x.RouteName.Zh_tw)\r\n                stop.DepartureStopNameZh = x.DepartureStopNameZh\r\n                stop.DestinationStopNameZh = x.DestinationStopNameZh\r\n                stop.City = x.City\r\n              }\r\n            })\r\n          })\r\n          this.EstimateNearList.sort((a, b) => {\r\n            return a.RouteName.Zh_tw - b.RouteName.Zh_tw\r\n          })\r\n          console.log(this.EstimateNearList)\r\n          this.selectStationName = item.StationName.Zh_tw\r\n          this.selectStationUID = item.StationUID\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    backToNearStationList () {\r\n      document.querySelector('.near-station-area').classList.add('active')\r\n      document.querySelector('.estimate-near-area').classList.remove('active')\r\n    },\r\n    showArea (area) {\r\n      if (area === 'map') {\r\n        this.mobileTool = 'map'\r\n        document.querySelector('.near-station-area').classList.remove('active')\r\n        document.querySelector('.estimate-near-area').classList.remove('active')\r\n      } else if (area === 'station') {\r\n        this.mobileTool = 'station'\r\n        document.querySelector('.near-station-area').classList.add('active')\r\n        document.querySelector('.estimate-near-area').classList.remove('active')\r\n      } else if (area === 'time') {\r\n        this.mobileTool = 'time'\r\n        document.querySelector('.near-station-area').classList.remove('active')\r\n        document.querySelector('.estimate-near-area').classList.add('active')\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    // quick start\r\n    openStreetMap = $L.map('map', {\r\n      zoomControl: false,\r\n      center: [23.51357237187571, 120.21110434230025],\r\n      zoom: 8,\r\n      tap: false\r\n    })\r\n    $L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution:\r\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(openStreetMap)\r\n\r\n    // resset zoom position\r\n    $L.control.zoom({\r\n      position: 'bottomright'\r\n    }).addTo(openStreetMap)\r\n    openStreetMap.on('moveend', function () {\r\n      document.querySelector('.gps-icon').classList.remove('active')\r\n    })\r\n    const func = this.zoomLevelAddMarker\r\n    openStreetMap.on('zoomend', function () {\r\n      func()\r\n    })\r\n    this.locateGPS()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./NearbyStation.vue?vue&type=template&id=ec49a44e\"\nimport script from \"./NearbyStation.vue?vue&type=script&lang=js\"\nexport * from \"./NearbyStation.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\F2E\\\\bus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar un$Sort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? un$Sort(array) : un$Sort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","module.exports = __webpack_public_path__ + \"img/bus_stop_select.dacbc18d.svg\";","var arraySlice = require('../internals/array-slice');\n\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    array,\n    mergeSort(arraySlice(array, 0, middle), comparefn),\n    mergeSort(arraySlice(array, middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (array, left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n\n  while (lindex < llength || rindex < rlength) {\n    array[lindex + rindex] = (lindex < llength && rindex < rlength)\n      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n      : lindex < llength ? left[lindex++] : right[rindex++];\n  } return array;\n};\n\nmodule.exports = mergeSort;\n","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n"],"sourceRoot":""}