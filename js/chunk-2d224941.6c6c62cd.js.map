{"version":3,"sources":["webpack:///./src/views/StopSearch.vue","webpack:///./src/views/StopSearch.vue?087a"],"names":["class","src","alt","id","active","isLoading","z-index","locateGPS","openStreetMap","positionIcon","Icon","iconUrl","iconSize","iconAnchor","popupAnchor","data","locationMarkerID","allCityStationList","cityList","methods","navigator","geolocation","getCurrentPosition","position","eachLayer","layer","_leaflet_id","removeLayer","locate","coords","latitude","longitude","console","log","setView","document","querySelector","classList","add","marker","icon","addTo","mounted","map","zoomControl","center","zoom","tap","tileLayer","attribution","control","on","remove","this","__exports__","render"],"mappings":"+JAIOA,MAAM,4B,2NAOJA,MAAM,Y,4PAyBP,eAAsE,OAAjEC,IAAA,IAA8BD,MAAM,cAAcE,IAAI,Y,YAA3D,G,EAEF,eAAgC,OAA3BF,MAAM,MAAMG,GAAG,O,qHArCxB,eAEU,GAFAC,OAAQ,EAAAC,UACjBC,UAAS,K,mBAEV,eAoCM,MApCN,EAoCM,CAnCJ,EAMA,eA4BM,MA5BN,EA4BM,CA3BJ,EAuBA,eAEM,OAFDN,MAAM,WAAY,QAAK,+BAAE,EAAAO,e,GAG9B,O,mDAQFC,EAAgB,GAQdC,EAAe,IAAI,IAAGC,KAAK,CAC/BC,QAAS,EAAQ,QACjBC,SAAU,CAAC,GAAI,IACfC,WAAY,CAAC,GAAI,IACjBC,YAAa,CAAC,GAAI,MAGL,GACbC,KADa,WAEX,MAAO,CACLV,WAAW,EACXW,iBAAkB,GAClBC,mBAAoB,GACpBC,SAAA,IAGJC,QAAS,CACPZ,UADO,WACM,WAEXa,UAAUC,YAAYC,oBAAmB,SAAAC,GACvCf,EAAcgB,WAAU,SAACC,GACnBA,EAAMC,cAAgB,EAAKV,kBAC7BR,EAAcmB,YAAYF,MAG9B,IAAMG,EAAS,CAACL,EAASM,OAAOC,SAAUP,EAASM,OAAOE,WAC1DC,QAAQC,IAAIL,GACZpB,EAAc0B,QAAQN,EAAQ,IAC9BO,SAASC,cAAc,aAAaC,UAAUC,IAAI,UAClD,IAAMC,EAAS,IAAGA,OAAO,CAAChB,EAASM,OAAOC,SAAUP,EAASM,OAAOE,WAAY,CAAES,KAAM/B,IACxF8B,EAAOE,MAAMjC,GACb,EAAKQ,iBAAmBuB,EAAOb,iBAIrCgB,QA5Ba,WA8BXlC,EAAgB,IAAGmC,IAAI,MAAO,CAC5BC,aAAa,EACbC,OAAQ,CAAC,WAAY,aACrBC,KAAM,GACNC,KAAK,IAEP,IAAGC,UAAU,qDAAsD,CACjEC,YACE,4FACDR,MAAMjC,GAGT,IAAG0C,QAAQJ,KAAK,CACdvB,SAAU,gBACTkB,MAAMjC,GACTA,EAAc2C,GAAG,WAAW,WAC1BhB,SAASC,cAAc,aAAaC,UAAUe,OAAO,aAEvDC,KAAK9C,c,qBCxGT,MAAM+C,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d224941.6c6c62cd.js","sourcesContent":["<template>\r\n  <Loading :active=\"isLoading\"\r\n  :z-index=\"2000\">\r\n  </Loading>\r\n  <div class=\"h-100 d-flex flex-column\">\r\n    <div class=\"bread-bar\">\r\n      <ol class=\"breadcrumb m-0 d-md-flex d-none\">\r\n        <li class=\"breadcrumb-item\"><a href=\"#\">首頁</a></li>\r\n        <li class=\"breadcrumb-item active\" aria-current=\"page\">附近站牌</li>\r\n      </ol>\r\n    </div>\r\n    <div class=\"map-wrap\">\r\n      <div class=\"route-search-area active\">\r\n        <div class=\"route-search-header\">\r\n          <input type=\"search\" class=\"form-control\" id=\"stationName\" placeholder=\"想去哪裡?\">\r\n        </div>\r\n        <div class=\"route-search-body\">\r\n          <ul class=\"route-list\">\r\n            <!-- <li class=\"route-list-item\" v-for=\"item in routeList\" :key=\"item.RouteUID\">\r\n              <div class=\"d-flex justify-content-between\">\r\n                <div class=\"title\">{{ item.RouteName.Zh_tw }}</div>\r\n                <div class=\"icon\">\r\n                  <a href=\"#\"><span class=\"material-icons\">\r\n                  favorite_border\r\n                  </span></a>\r\n                </div>\r\n              </div>\r\n              <div class=\"d-flex justify-content-between\">\r\n                <div class=\"od\">{{ item.DepartureStopNameZh }}-{{ item.DestinationStopNameZh }}</div>\r\n                <div class=\"city\">{{ city }}</div>\r\n              </div>\r\n            </li> -->\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"gps-icon\" @click=\"locateGPS()\">\r\n        <img src=\"@/assets/images/gps.svg\" class=\"icon-filter\" alt=\"gps-icon\">\r\n      </div>\r\n      <div class=\"map\" id=\"map\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport $L from 'leaflet'\r\nimport cityList from '@/assets/CityList.json'\r\n// import Wkt from 'wicket'\r\nlet openStreetMap = {}\r\n\r\n// const stationIcon = new $L.Icon({\r\n//   iconUrl: require('@/assets/images/busStop.svg'),\r\n//   iconSize: [24, 24],\r\n//   iconAnchor: [12, 12],\r\n//   popupAnchor: [0, -12]\r\n// })\r\nconst positionIcon = new $L.Icon({\r\n  iconUrl: require('@/assets/images/position.svg'),\r\n  iconSize: [49, 49],\r\n  iconAnchor: [24, 24],\r\n  popupAnchor: [0, -24]\r\n})\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      locationMarkerID: '',\r\n      allCityStationList: [],\r\n      cityList\r\n    }\r\n  },\r\n  methods: {\r\n    locateGPS () {\r\n      // 定位\r\n      navigator.geolocation.getCurrentPosition(position => {\r\n        openStreetMap.eachLayer((layer) => {\r\n          if (layer._leaflet_id === this.locationMarkerID) {\r\n            openStreetMap.removeLayer(layer)\r\n          }\r\n        })\r\n        const locate = [position.coords.latitude, position.coords.longitude]\r\n        console.log(locate)\r\n        openStreetMap.setView(locate, 15)\r\n        document.querySelector('.gps-icon').classList.add('active')\r\n        const marker = $L.marker([position.coords.latitude, position.coords.longitude], { icon: positionIcon })\r\n        marker.addTo(openStreetMap)\r\n        this.locationMarkerID = marker._leaflet_id\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    // quick start\r\n    openStreetMap = $L.map('map', {\r\n      zoomControl: false,\r\n      center: [25.0834397, 121.4570441],\r\n      zoom: 13,\r\n      tap: false\r\n    })\r\n    $L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution:\r\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(openStreetMap)\r\n\r\n    // resset zoom position\r\n    $L.control.zoom({\r\n      position: 'bottomright'\r\n    }).addTo(openStreetMap)\r\n    openStreetMap.on('moveend', function () {\r\n      document.querySelector('.gps-icon').classList.remove('active')\r\n    })\r\n    this.locateGPS()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./StopSearch.vue?vue&type=template&id=6e7d6922\"\nimport script from \"./StopSearch.vue?vue&type=script&lang=js\"\nexport * from \"./StopSearch.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\F2E\\\\bus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}